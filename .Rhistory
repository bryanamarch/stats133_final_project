# In air_data the order of data ia currently in ascending order, but to match
# av_data we want it to be in descending order.
air_data_4 <- air_data_3[nrow(air_data_3):1,]
# Now to extract the information (columns) that we want
av_data_4 <- av_data_3[c('Event.Date', 'new_location', 'Type')]
air_data_5 <- air_data_4[c('Date', 'Location', 'Type')]
# We don't want the crash information for crashes missing 'Type' information.
av_data_5 <- subset(av_data_4, Type != '    ')
air_data_6 <- subset(air_data_5, Type != '')
# Rename column names so that they are the same for both data frames.
names(av_data_5) <- c('date', 'location', 'type')
names(air_data_6) <- c('date', 'location', 'type')
# Now we combine the two data frames.
data <- rbind(av_data_5, air_data_6)
# Changing the 'type' column to all lowercase
data$type <- tolower(data$type)
# Changing the 'location' column to all lowercase
data$location <- tolower(data$location)
# Exporting the 'data' file into the data folder.
write.csv(data, file = 'data/data.csv')
# ======================================================================
# Part 1: Months with Most Airplane Accidents
# Description: Here we are looking at the number of accidents that occur
#              every month to see if there is some pattern or if the
#              data is all uniform.
# ======================================================================
# packages needed
library(stringr)
# function needed
source('code/num_name.R')
# importing data
data <- read.csv('data/data.csv', stringsAsFactors = FALSE)
# removing first column due to repeated index
data$X <- NULL
# extracting months
data$month <- as.numeric(str_extract(data$date, '[0-9]+'))
# labeling months with words using the num_name function.
dates <- data$month
month <- num_name(dates)
# Number of Entries Each Month
month_names <- c('January', 'February', 'March', 'April', 'May', 'June',
'July', 'August', 'September', 'October', 'November',
'December')
monthly_data = NULL
for (name in month_names){
total_per_month <- sum(month == name)
monthly_data <- c(monthly_data, total_per_month)
}
# Graphing the months
barplot(monthly_data, xlab = 'Months',
ylab = 'Number of Accidents',
main = 'Number of Crashes Each Month',
names.arg = month_names,
las = 2,
cex.names = .75,
col = '#FD075E')
# Exporting the Graphics
# PDF
pdf('plots_and_graphics/number_of_crashes_each_month.pdf')
barplot(monthly_data, xlab = 'Months',
ylab = 'Number of Accidents',
main = 'Number of Crashes Each Month',
names.arg = month_names,
las = 2,
cex.names = .75,
col = '#FD075E')
dev.off()
# PNG
png('plots_and_graphics/number_of_crashes_each_month.png', res = 96)
barplot(monthly_data, xlab = 'Months',
ylab = 'Number of Accidents',
main = 'Number of Crashes Each Month',
names.arg = month_names,
las = 2,
cex.names = .75,
col = '#FD075E')
dev.off()
# ======================================================================
# Part 2: Percentage of Accidents in Each Decade
# Description: Here we will find the proportions of accidents to each
#              dataset.
# ======================================================================
# packages needed
library(stringr)
# function needed
source('code/norm_decade.R')
# making a year only column
data$year <- as.numeric(str_extract(data$date, '[0-9]{4}'))
# labeling by decades
decade = NULL
for(i in 1:length(data$year)){
x <- data$year[i]
if ((x %in% c(1920:1929))==TRUE) x = '1920s'
if ((x %in% c(1930:1939))==TRUE) x = '1930s'
if ((x %in% c(1940:1949))==TRUE) x = '1940s'
if ((x %in% c(1950:1959))==TRUE) x = '1950s'
if ((x %in% c(1960:1969))==TRUE) x = '1960s'
if ((x %in% c(1970:1979))==TRUE) x = '1970s'
if ((x %in% c(1980:1989))==TRUE) x = '1980s'
if ((x %in% c(1990:1999))==TRUE) x = '1990s'
if ((x %in% c(2000:2009))==TRUE) x = '2000s'
if ((x %in% c(2010:2019))==TRUE) x = '2010s'
decade = c(decade, x)
}
data$decade <- decade
# looking at freq of accidents for
table(data$decade)
# normalizing data
amt_dataset1 <- nrow(air_data_6)
amt_dataset2 <- nrow(av_data_5)
norm_decade_1920 <- norm_decade('1920s')
norm_decade_1930 <- norm_decade('1930s')
norm_decade_1940 <- norm_decade('1940s')
norm_decade_1950 <- norm_decade('1950s')
norm_decade_1960 <- norm_decade('1960s')
norm_decade_1970 <- norm_decade('1970s')
norm_decade_1980 <- norm_decade('1980s')
norm_decade_1990 <- norm_decade('1990s')
norm_decade_2000 <- norm_decade('2000s')
norm_decade_2010 <- norm_decade('2010s')
vec_norm_decade <- c(norm_decade_1920, norm_decade_1930,  norm_decade_1940,
norm_decade_1950, norm_decade_1960, norm_decade_1970,
norm_decade_1980, norm_decade_1990, norm_decade_2000,
norm_decade_2010)
# Graphing
decade_names <- c('1920s', '1930s', '1940s', '1950s', '1960s', '1970s',
'1980s', '1990s', '2000s', '2010s')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
# Exporting the Graphics
# PDF
pdf('plots_and_graphics/normalized_number_of_crashes_each_decade.pdf')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PNG
png('plots_and_graphics/normalized_number_of_crashes_each_decade.png',
res = 96)
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
source('code/fun_top3.R')
fun_top3(data = data, decade_names = decade_names)
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
return(assign(name, value))
}
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
}
fun_top3 <- function(data, decade_names){
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
return(assign(name, value))
}
}
fun_top3(data = data, decade_names = decade_names)
rm(list = top3_1920s)
rm(list = 'top3_1920s')
rm(list = 'top3_1930s')
rm(list = 'top3_1940s')
rm(list = 'top3_1950s')
rm(list = 'top3_1960s')
rm(list = 'top3_1970s')
rm(list = 'top3_1980s')
rm(list = 'top3_1990s')
rm(list = 'top3_2000s')
rm(list = 'top3_2010s')
fun_top3(data = data, decade_names = decade_names)
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
}
applu
?apply
}
> rm(list = 'top3_1920s')
> rm(list = 'top3_1930s')
> rm(list = 'top3_1940s')
> rm(list = 'top3_1950s')
> rm(list = 'top3_1960s')
> rm(list = 'top3_1970s')
> rm(list = 'top3_1980s')
> rm(list = 'top3_1990s')
> rm(list = 'top3_2000s')
> rm(list = 'top3_2010s')
rm(list = 'top3_1920s')
rm(list = 'top3_1930s')
rm(list = 'top3_1940s')
rm(list = 'top3_1950s')
rm(list = 'top3_1960s')
rm(list = 'top3_1970s')
rm(list = 'top3_1980s')
rm(list = 'top3_1990s')
rm(list = 'top3_2000s')
rm(list = 'top3_2010s')
top3_list <- NULL
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
top3_list <- list(top3_list, assign(name, value))
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
top3_list <- append(top3_list, assign(name, value))
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
top3_list <- append(top3_list, name = assign(name, value))
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
top3_list <- append(top3_list, paste0('top3_',i))
}
objects('top3_1920s')
?obj
?parse
parse(text = 'top3_1920s')
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
top3_list <- append(top3_list, parse(text = paste0('top3_',i))
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
top3_list <- append(top3_list, parse(text = paste0('top3_',i)))
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
top3_list <- append(top3_list, name)
}
top3_list <- list()
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
assign(name, value)
top3_list <- append(top3_list, get(name))
}
value
class(value)
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
top3 <- c(top3, assign(name, value))
}
top3 <- NULL
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
name <- paste0('top3_',i)
top3 <- c(top3, assign(name, value))
}
top3 <- NULL
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
# name <- paste0('top3_',i)
top3 <- c(top3, value)
}
fun_top3(data = data, decade_names = decade_names)
rm('top3')
rm(list = 'top3_1920s')
rm(list = 'top3_1930s')
rm(list = 'top3_1940s')
rm(list = 'top3_1950s')
rm(list = 'top3_1960s')
rm(list = 'top3_1970s')
rm(list = 'top3_1980s')
rm(list = 'top3_1990s')
rm(list = 'top3_2000s')
rm(list = 'top3_2010s')
rm('top3_list')
fun_top3(data = data, decade_names = decade_names)
top3_array <- fun_top3(data = data, decade_names = decade_names)
head(top3_array)
summary(top3_array)
top3_array
top3 <- NULL
for (i in decade_names){
data_subset <- subset(data, decade == i)
value <- head(sort(table(data_subset$type), decreasing = TRUE), n = 3)
# name <- paste0('top3_',i)
top3 <- c(top3, value)
}
top3_array <- fun_top3(data = data, decade_names = decade_names)
top3_array <- fun_top3(dat = data, dec_names = decade_names)
top3_array <- fun_top3(data, decade_names)
decade_names
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
top3_array <- fun_top3(data, decade_names)
row.names(top3_array)
row.names(top3_array)
type <- row.names(top3_array)
top3_array <- fun_top3(data, decade_names)
top3_array
?row.names
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
top3_array <- fun_top3(data, decade_names)
View(av_data_1)
View(top3_array)
View(top3_array)
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
top3_array <- fun_top3(data, decade_names)
names(top3_array)
type <- names(top3_array)
as.vector(top3_array)
type <- names(top3_array)
freq <- as.vector(top3_array)
decade <- rep(decade_names, each = 3)
top3 <- data.frame(type = type, freq = freq, decade = decade)
View(top3)
source('~/R/Final Project/stats133_final_project/code/part_3.R')
# 1980-2010
decade_names_2 <- decade_names[7:9]
type_2 <- type[19:27]
freq_2 <- freq[19:27]
decade_2 <- rep(decade_names_2, each = 3)
top3_2 <- data.frame(type = type_2, freq = freq_2, decade = decade_2)
# plotting the trend
ggplot(top3_2, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Most Common Planes in Accidents 1980s to 2000s')
decade_names_1 <- decade_names[3:6]
type_1 <- type[7:18]
freq_1 <- freq[7:18]
decade_1 <- rep(decade_names_1, each = 3)
top3_1 <- data.frame(type = type_1, freq = freq_1, decade = decade_1)
# plotting the trend
ggplot(top3_1, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Most Common Planes in Accidents 1940s to 1970s')
# 1940-1980
decade_names_1 <- decade_names[3:6]
type_1 <- type[7:18]
freq_1 <- freq[7:18]
decade_1 <- rep(decade_names_1, each = 3)
top3_1 <- data.frame(type = type_1, freq = freq_1, decade = decade_1)
# plotting the trend
ggplot(top3_1, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Most Common Planes in Accidents 1940s to 1970s')
# 1980-2010
decade_names_2 <- decade_names[7:9]
type_2 <- type[19:27]
freq_2 <- freq[19:27]
decade_2 <- rep(decade_names_2, each = 3)
top3_2 <- data.frame(type = type_2, freq = freq_2, decade = decade_2)
# plotting the trend
ggplot(top3_2, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Most Common Planes in Accidents 1980s to 2000s')
# Exporting the Graphics
# PDF
pdf('plots_and_graphics/most_common_planes_in_accidents_1940s_to_1970s.pdf')
ggplot(top3_1, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Top 3 Planes in Accidents 1940s to 1970s')
dev.off()
pdf('plots_and_graphics/most_common_planes_in_accidents_1980s_to_2000s.pdf')
ggplot(top3_2, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Top 3 Planes in Accidents 1980s to 2000s')
dev.off()
# PNG
png('plots_and_graphics/most_common_planes_in_accidents_1940s_to_1970s.png',
res = 96, width = 700, height = 500)
ggplot(top3_1, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Top 3 Planes in Accidents 1940s to 1970s')
dev.off()
png('plots_and_graphics/most_common_planes_in_accidents_1980s_to_2000s.png',
res = 96)
ggplot(top3_2, aes(x = decade, y = freq, fill = type))+
geom_bar( stat = 'identity', position = position_dodge())+
ggtitle('Top 3 Planes in Accidents 1980s to 2000s')
dev.off()
# PDF
pdf('plots_and_graphics/normalized_number_of_crashes_each_decade.pdf')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PNG
png('plots_and_graphics/normalized_number_of_crashes_each_decade.png',
res = 96)
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
pdf('plots_and_graphics/normalized_number_of_crashes_each_decade.pdf')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PNG
png('plots_and_graphics/normalized_number_of_crashes_each_decade.png',
res = 96)
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
Exporting the Graphics
# PDF
pdf('plots_and_graphics/normalized_number_of_crashes_each_decade.pdf')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PNG
png('plots_and_graphics/normalized_number_of_crashes_each_decade.png',
res = 96)
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PDF
pdf('plots_and_graphics/normalized_number_of_crashes_each_decade.pdf')
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
# PNG
png('plots_and_graphics/normalized_number_of_crashes_each_decade.png',
res = 96)
barplot(vec_norm_decade, xlab = 'Decades',
ylab = 'Proportions of Accidents to Each Dataset',
main = 'Normalized Number of Crashes Each Decade',
names.arg = decade_names,
las = 2,
cex.names = .75,
col = '#FFAC0E')
dev.off()
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
source('~/R/Final Project/stats133_final_project/code/fun_top3.R')
source('~/R/Final Project/stats133_final_project/code/part_3.R')
